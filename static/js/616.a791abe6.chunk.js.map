{"version":3,"file":"static/js/616.a791abe6.chunk.js","mappings":"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","sources":["hooks/useFetch.jsx","webpack://react-homework-template/./src/pages/MovieDetails.module.css?6cd2","pages/MovieDetails.jsx","services/api.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import { useCallback, useState } from 'react';\n\nexport const useFetch = () => {\n  const [isFetching, setIsFetching] = useState(false);\n  const [data, setData] = useState(null);\n  const [error, setError] = useState('');\n\n  const fetchData = useCallback(async (requestFunction) => {\n    setIsFetching(true);\n    try {\n      const data = await requestFunction;\n\n      setData(data);\n    } catch (e) {\n      setError(e);\n    } finally {\n      setIsFetching(false);\n    }\n  }, []);\n\n  return { isFetching, data, error, fetchData };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"page\":\"MovieDetails_page__+WhzO\",\"button\":\"MovieDetails_button__JfcqV\",\"img\":\"MovieDetails_img__WWAoB\",\"movie_info\":\"MovieDetails_movie_info__xzNf0\",\"genre\":\"MovieDetails_genre__hpnsh\",\"link\":\"MovieDetails_link__wv3O1\",\"additional_handlers\":\"MovieDetails_additional_handlers__ZNY+k\"};","import { Suspense, lazy, useEffect } from 'react';\nimport { useParams,useLocation,useNavigate,Link,Routes,Route } from 'react-router-dom';\nimport { MoviesAPI } from 'services/api';\nimport { useFetch } from 'hooks/useFetch';\nimport { Loader } from 'components';\nimport css from './MovieDetails.module.css'\n\n\nconst LazyCast = lazy(() => import('./Cast'));\nconst LazyReviews = lazy(() => import('./Reviews'));\n\nconst MovieDetails = () => {\n  const { isFetching, data, error, fetchData } = useFetch();\n  const movieDetails = data;\n\n  const location = useLocation();\n  console.log('location From MovieDetal: ', location);\n\n  const navigate = useNavigate();\n  const { movieId } = useParams();\n\n  useEffect(() => {\n    if (!movieId) return;\n\n    fetchData(MoviesAPI.fetchMovieById(movieId));\n  }, [fetchData, movieId]);\n\n  const handleMoveBack = () => {\n    if (location.state) {\n      navigate(location.state.from);\n      return;\n    }\n\n    navigate('/');\n  };\n\n  return (\n    <div className={css.wrapper}>\n      <button onClick={() => handleMoveBack()} className={css.button}> Go back </button>\n      {error && <p>{error.message}</p>}\n      {isFetching && (\n        <div>\n          <Loader />\n        </div>\n      )}\n      {!!movieDetails && (\n        <div className={css.page}>\n          <img\n            src={`https://image.tmdb.org/t/p/w500${movieDetails.poster_path}`}\n            alt={movieDetails.original_title}\n            className={css.img}\n          />\n          <div className={css.movie_info}>\n            <h1>{movieDetails.title}</h1>\n            <p>Vote Average: {movieDetails.vote_average}</p>\n            <h2>Overview</h2>\n            <p> {movieDetails.overview}</p>\n            <h3>Genres</h3>\n            {movieDetails?.genres?.length > 0\n              ? movieDetails.genres.map(({ id, name }) => {\n                  return (\n                    <span className={css.genre} key={id}>\n                      {name}\n                    </span>\n                  );\n                })\n              : 'There are no genres available'}\n          </div>\n        </div>\n      )}\n      <div>\n        <div className={css.additional_handlers}>\n          <Link\n            className={css.link}\n            to=\"cast\"\n            state={{ from: location.state?.from }}\n          >\n            Cast\n          </Link>\n          <Link\n            className={css.link}\n            to=\"reviews\"\n            state={{ from: location.state?.from }}\n          >\n            Reviews\n          </Link>\n        </div>\n        <Suspense fallback={<Loader />}>\n          <Routes>\n            <Route path=\"cast\" element={<LazyCast />} />\n            <Route path=\"reviews\" element={<LazyReviews />} />\n          </Routes>\n        </Suspense>\n      </div>\n    </div>\n  );\n};\n\nexport default MovieDetails;\n","const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '95b1302bfbaa67a4b0727b46a7f8151e';\n\nexport const MoviesAPI = {\n  async fetchMovies ()  {\n    const response = await fetch(\n      `${BASE_URL}/trending/all/day?api_key=${API_KEY}`\n    );\n    return await response.json();\n  },\n  async fetchMovieById (movieId)  {\n    const response = await fetch(\n      `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US`\n    );\n    return await response.json();\n  },\n  async fetchMovieBySearch (searchTerm)  {\n    const response = await fetch(\n      `${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&query=${searchTerm}&page=1&include_adult=false`\n    );\n    return await response.json();\n  },\n  async fetchMovieCast (movieId)  {\n    const response = await fetch(\n      `${BASE_URL}/movie/${movieId}/credits?api_key=${API_KEY}&language=en-US`\n    );\n    return await response.json();\n  },\n  async fetchMovieReviews (movieId)  {\n    const response = await fetch(\n      `${BASE_URL}/movie/${movieId}/reviews?api_key=${API_KEY}&language=en-US&page=1`\n    );\n    return await response.json();\n  },\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["useFetch","useState","isFetching","setIsFetching","data","setData","error","setError","fetchData","useCallback","requestFunction","LazyCast","lazy","LazyReviews","movieDetails","location","useLocation","console","log","navigate","useNavigate","movieId","useParams","useEffect","MoviesAPI","className","css","onClick","state","from","message","src","poster_path","alt","original_title","title","vote_average","overview","genres","length","map","id","name","to","Suspense","fallback","path","element","BASE_URL","API_KEY","fetchMovies","fetch","response","json","fetchMovieById","fetchMovieBySearch","searchTerm","fetchMovieCast","fetchMovieReviews","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined"],"sourceRoot":""}